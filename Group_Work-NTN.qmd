---
date: last-modified
bibliography: bio.bib
csl: harvard-cite-them-right.csl
title: Next To Normal's Group Project
execute:
  echo: false
  freeze: true
format:
  html:
    code-copy: true
    code-link: true
    toc: true
    toc-title: On this page
    toc-depth: 2
    toc_float:
      collapsed: false
      smooth_scroll: true
  pdf:
    include-in-header:
      text: |
        \addtokomafont{disposition}{\rmfamily}
    mainfont: Spectral
    sansfont: "Roboto Flex"
    monofont: "Liberation Mono"
    papersize: a4
    geometry:
      - top=25mm
      - left=40mm
      - right=30mm
      - bottom=25mm
      - heightrounded
    toc: false
    number-sections: false
    colorlinks: true
    highlight-style: github
jupyter:
  jupytext:
    text_representation:
      extension: .qmd
      format_name: quarto
      format_version: '1.0'
      jupytext_version: 1.15.2
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

## Declaration of Authorship {.unnumbered .unlisted}

We, [Next To Normal], pledge our honour that the work presented in this assessment is our own. Where information has been derived from other sources, we confirm that this has been indicated in the work. Where a Large Language Model such as ChatGPT has been used we confirm that we have made its contribution to the final submission clear.

Date:15/12

Student Numbers: 25109433,25243075,25063842,25223683,25245242

## Priorities for Feedback

Are there any areas on which you would appreciate more detailed feedback if we're able to offer it?

{{< pagebreak >}}

**Remove this page (up to the next `pagebreak`) prior to submission!**

# Code Examples

This page has example code to show you can include outputs while hiding code in Quarto, as well as some tools for interpolating data in the text. 

See the raw file for examples of how to hide computational output as there is code hidden here.

```{python}
#| echo: True 
# This code will be shown, 
# but the next block will not
import os
import pandas as pd
```

```{python}
# This code is not shown because echo was
# set to False in the header. You should
# think carefully about whether you want
# or need to show any code to the reader
# in the PDf.
host = 'https://orca.casa.ucl.ac.uk'
path = '~jreades/data'
file = '20250615-London-listings.parquet'

if os.path.exists(file):
  df = pd.read_parquet(file)
else: 
  df = pd.read_parquet(f'{host}/{path}/{file}')
  df.to_parquet(file)
```

An inline citation example: As discussed on @insideairbnb, there are many...

A parenthetical citation example: There are many ways to research Airbnb [see, for example, @insideairbnb]... 

```{python}
#| output: asis
# This is one way to write dynamic text. 'As is' means
# it will interpret the result as regular Quarto markdown 
# so the below `print` statement becomes plain text with
# the size of the dataframe interpolated into the string.
# When Quarto is done running the Python code what's left
# is plain-text and that is then treated as a paragraph
# like it would be if you'd written it in Quarto.
print(f"One of way to embed output in the text looks like this: after cleaning, we were left with {df.shape[0]:,} rows of data.")
```

```{python}
# The other way is to ensure that your variables are *simple* 
# data types that Quarto can understand. So notice below that
# we just have a single, inline `{python} with the value of
# the row directly inserted into the sentence. his should also work, but is sometimes less predictably
# reliable.
row_count = f"{df.shape[0]:,}"
```
The other way is to interpolate it directly into the sentence like this (`{python} row_count `); however, I've found it less reliable and it really requires you to be careful about data types. So `{python} print(f"{df.shape[0]:,}") ` probably won't work and you'll just see some Python code instead.

And here's a nice little chart straight into the document!

```{python}
ax = df.host_listings_count.plot.hist(bins=50);
ax.set_xlim([0,500]);
```

{{< pagebreak >}}

# Briefing
## Executive Summary

**Main takeaway**  
（1–2 句话，总结：Airbnb 在伦敦是否“失控”，以及是否需要监管）

**Key findings**  
- Airbnb 活动在伦敦呈现明显的空间不均衡分布，专业房东高度集中于……
- 少数专业房东控制了不成比例数量的房源，显示出明显的商业化特征。
- 若实施该提案，受影响的物业主要集中在……
- 该政策在缓解住房压力方面具有潜在益处，但也可能带来……
- 从社会流动性的角度看，该政策可被重新叙述为……
（上面是ai写的，我们需要结合自己的结论写摘要）：要注意：不写方法不写代码不写“我们将分析”完全模仿报告的摘要风格

## Background

简要概述伦敦短期租赁当前的争议焦点。
阐述反对党提出的政策建议及其引发争议的原因。
之前写的背景：#需要改
Background 近期，市长社会流动性顾问因非法出租公有暂住房屋的丑闻，将伦敦住房短缺与财富不平等的尖锐矛盾推向公众视野。 反对党借机提出强硬提案，要求对短期租赁（Airbnb）的房东实施强制登记并提高市政税，声称要平衡被 Airbnb 破坏的租赁和酒店市场。

本简报旨在评估这一政治驱动提案的经济合理性、社会公平性及对市长竞选的潜在政治影响。 现有分析表明，Airbnb 的商业化运营正在系统性地加剧伦敦的住房不平等问题。 造成这一现象的核心原因在于： 1.商业化挤占住房： 平台上职业房东和非法房源的存在，挤占了私人长租和酒店业的生存空间，从而损害了私人租房者的利益，并间接推高了区域房价。 2.加速区域财富不平等： 租金和房价上涨加剧了房主与非房主之间的财富差距。同时，房租压力使得低收入家庭向外伦敦迁移，加速了区域贫困的郊区化趋势。 3.社区旅游化： 商业运营引入了负面外部性（如噪音和滋扰），拉低了社区生活质量，导致社区走向“旅游化”。

## Analytical Framework and Data


这个所有人写完之后我来综合


# Question
## Q1: Is Airbnb “out of control” in London?

**Short answer**  
（一句话交代：例如
Airbnb activity in London is highly concentrated among a small subset of hosts, particularly professional hosts operating entire-home listings.）

**Evidence:**  
- 列数据，简要阐述数据，是什么，数据为（number)，数据表示了什么。


**Interpretation**  
详细阐述These patterns suggest that Airbnb activity in London is better understood
as spatially concentrated rather than uniformly excessive.

```{python}
# 这里才写 Python
import pandas as pd
import geopandas as gpd

df = pd.read_csv("data/listings.csv")
df.head()
```

## Q2: How many professional landlords are there?

**Short answer:**  
London has a relatively small number of professional landlords, totalling 5,222. These landlords play a significant role in shaping concerns about Airbnb being “out of control” in the city.

**Evidence:**  

- London has a total of **5,222 professional hosts**, accounting for **9.4% of all Airbnb hosts**.
  Professional hosts are defined as those operating **two or more entire-home listings**, a conservative threshold commonly used in the Airbnb literature to capture sustained commercial activity rather than casual home-sharing (@sainaghi2021mom).

![Share of Professional Hosts Among All Hosts](https://raw.githubusercontent.com/Taoo2025/casa0013_fsds_finalwork/fddef7c18e555c3704d4330345c058536fb0d83b/Share%20of%20Professional%20Hosts%20Among%20All%20Hosts.png)


- Professional hosts are unevenly distributed across space and rental orientation:
  - **Inner-city long-term professional hosts:** 3,590  
  - **Inner-city short-term professional hosts:** 108  
  - **Outer-city long-term professional hosts:** 921  
  - **Outer-city short-term professional hosts:** 603  

![Composition of Professional Hosts by Location and Rental Orientation](https://raw.githubusercontent.com/Taoo2025/casa0013_fsds_finalwork/fddef7c18e555c3704d4330345c058536fb0d83b/Composition%20of%20Professional%20Hosts%20by%20Location%20and%20Rental%20Orientation.png)
**Definitions and Analytical Scope**

Following the Airbnb literature, professional hosts are commonly defined as hosts operating multiple listings, reflecting a shift from casual home-sharing towards commercial provision (@sainaghi2021mom). Building on this approach, this study adopts a more conservative operational definition by restricting professional hosts to those managing **two or more entire-home listings**. This refinement is particularly relevant in the context of housing inequality, as entire-home listings imply a full withdrawal of dwellings from residential use and are therefore more directly associated with pressures on the long-term housing market.

To account for heterogeneity within this group, professional hosts are further classified by **spatial location (Inner vs Outer London)** and **rental orientation (short-term vs long-term)**. The Inner–Outer London distinction follows established findings that housing pressure and wealth inequality in London are structurally organised along this divide (@travers2016housing, p. 17), and that intensive commercial activities tend to concentrate in highly connected urban cores (@arcaute2016cities). Consistent with this literature, the City of London is included as part of the inner-city core.

Rental orientation is distinguished using a **90-day threshold**, derived from London’s short-term letting regulatory framework rather than a universal academic definition. This policy-relevant boundary allows listings that are persistently withdrawn from residential use to be distinguished from more occasional forms of short-term letting, aligning the empirical classification with ongoing political and regulatory debates.

**Interpretation:**  
The grouping results indicate that professional hosts do not constitute a homogeneous group. Their behaviour in the housing market varies markedly in terms of both operating intensity and spatial distribution. In numerical terms, professional hosts remain a minority of all Airbnb hosts; in terms of housing resource use and operating intensity, they have become one of the most influential groups on the platform.

This suggests that debates over whether Airbnb is “out of control” should not be assessed solely on the basis of host counts, but should instead focus on how different types of professional hosts use housing. This finding provides essential context for evaluating the scope and potential impacts of the opposition’s proposal in the subsequent analysis.

#放到后面数据分析Q4去，The KDE and MSOA-level analyses presented here further reveal a pronounced concentration of professional hosts in Inner London, whereas their presence in Outer London is comparatively sparse. This spatial asymmetry indicates that the disruptive effects of Airbnb are likely to be unevenly distributed across the city. Consequently, policy proposals that apply uniform registration and taxation measures without accounting for inner–outer differences risk both economic inefficiency and unintended social inequity.

#放到后面数据分析Q4去，KDE and MSOA-level analyses further reveal that such high-intensity short-term rentals are spatially concentrated in Inner London. This evidence suggests that Airbnb’s disruptive effects are unevenly distributed and underscores the need for differentiated policy responses rather than uniform regulation.

```{python}
# Q2
df = pd.read_csv("https://github.com/Taoo2025/casa0013_fsds_finalwork/raw/refs/heads/main/data/listings.csv") 

# Check the data content and format
print(df.head())
print(df.shape)

# Unify the column names
df.columns = df.columns.str.lower()
key_columns = [
    "id",
    "host_id",
    "room_type",
    "availability_365",
    "maximum_nights",
    "neighbourhood_cleansed",
    "latitude",
    "longitude"
]
# Back up data to safeguard against contamination of the original data.
df_select = df[key_columns].copy()
# numeric coercion
df_select["availability_365"] = pd.to_numeric(
    df_select["availability_365"],
    errors="coerce"
)

df_select["maximum_nights"] = pd.to_numeric(
    df_select["maximum_nights"],
    errors="coerce"
)
# Select the required columns
df_clean = (
    df_select
    .dropna(subset=[
        "availability_365",
        "maximum_nights",
        "host_id",
        "room_type",
        "neighbourhood_cleansed",
        "latitude",
        "longitude"
    ])
    .reset_index(drop=True)
)
# Inspect the dataframe before and after cleaning
print(df_clean.head())
print("Before NA cleaning:", len(df_select))
print("After NA cleaning:", len(df_clean))
# Filter properties
## 1.Only entire properties are available
df_entire = df_clean[df_clean["room_type"] == "Entire home/apt"].copy()
print(df_entire.head())
## 2.Count the number of entire properties owned by each landlord
host_entire_counts = (
    df_entire
    .groupby("host_id")
    .size()
    .reset_index(name="n_entire_homes")
)

## 3.Professional landlords: ≥2 properties
professional_hosts = host_entire_counts[
    host_entire_counts["n_entire_homes"] >= 2
]
## 4.Return to the listing level
df_professional = df_entire.merge(
    professional_hosts[["host_id"]],
    on="host_id",
    how="inner"
)
# Review the results of property listings screening
print(df_professional.head())
# Count the total number of landlords specialising in statistics.
n_professional_hosts = professional_hosts.shape[0]
print("Number of professional hosts:", n_professional_hosts)
# Review the affected properties
entire_counts_by_host = (
    df_professional
    .groupby("host_id")
    .size()
)

total_entire_listings_professional = entire_counts_by_host.sum()

print("Total entire-home listings owned by professional hosts:",
      total_entire_listings_professional)
# Take a look at the average number of entire properties owned by each professional landlord.
avg_entire_per_professional = entire_counts_by_host.mean()

avg_entire_per_professional
# Take a look at the median number of entire properties owned by professional landlords.

median_entire_per_professional = entire_counts_by_host.median()

median_entire_per_professional
# Inspect the current dataframe
print(len(df_professional))
print(df_professional.head())
# Defining the Inner and Outer Cities
## First, examine how the existing data names the London boroughs.
df_professional["neighbourhood_cleansed"].unique()
## Select the inner city area
## Inner London is defined as a set of central boroughs, including the City of London, which constitutes the historic and functional core of London and is consistently classified as part of Inner London in official statistics.
inner_boroughs = [
    "Camden",
    "Hackney",
    "Islington",
    "Kensington and Chelsea",
    "Lambeth",
    "Southwark",
    "Tower Hamlets",
    "Westminster",
    "Hammersmith and Fulham",
    "Wandsworth",
    "Lewisham",
    "Haringey",
    "Newham",
    "City of London"
]
## Use `np.where()` to create a new column named `inner_city`
df_professional["inner_city"] = np.where(
    df_professional["neighbourhood_cleansed"].isin(inner_boroughs),
    "Inner London",
    "Outer London"
)
#Define short-term and long-term rental categories, with the threshold set at 90 days.
##Further grouping based on short-term versus long-term rentals, though uncertain whether to select the 'availability_365' column or the 'maximum_nights' column. Therefore, first examine the median and mode of these two columns to observe the distribution pattern.
###The median availability of 189 days indicates that more than half of professional listings are unavailable for at least 176 days per year, suggesting a substantial degree of functional withdrawal from the housing market.
###By contrast, the median and modal maximum night setting of 365 indicates that most professional hosts impose no effective upper limit on booking duration, reflecting platform rule configuration rather than realised rental behaviour.
###Maximum night settings are used to identify the intended market role of professional hosts, distinguishing listings designed as long-term or quasi-hotel assets. Availability-based measures are subsequently employed to assess the intensity of commercial operation and its potential social externalities.
median_availability = df_professional["availability_365"].median()
mode_availability = df_professional["availability_365"].mode()
median_min_nights = df_professional["maximum_nights"].median()
mode_min_nights = df_professional["maximum_nights"].mode()
print("Availability_365:")
print("  Median:", median_availability)
print("  Mode(s):", mode_availability.tolist())

print("\nmaximum_nights:")
print("  Median:", median_min_nights)
print("  Mode(s):", mode_min_nights.tolist())
##Availability_365:
  #Median: 189.0
  #Mode(s): [0]

##maximum_nights:
 #Median: 365.0
  #Mode(s): [365]
# Define rental_role
df_professional["rental_role"] = np.where(
    df_professional["maximum_nights"] > 90,
    "Long-term oriented",
    "Short-term oriented"
)

#Calculate days_unavailable，Often regarded as proxy for usage intensity
df_professional["days_unavailable"] = (
    365 - df_professional["availability_365"]
)
#Quickly verify whether the new column has been successfully created and confirm that the data appears reasonable.
print(df_professional.head())

#Grouping
host_level = (
    df_professional
    .groupby("host_id")
    .agg(
        n_listings=("id", "count"),

        # Classifying landlords into inner and outer districts (majority principle)
        share_inner_city=("inner_city", lambda x: (x == "Inner London").mean()),

        # Classify landlords using short and long groups (majority principle, based on maximum_nights)
        share_long_term_role=("rental_role", lambda x: (x == "Long-term oriented").mean()),

        # Operational intensity (descriptive, not used for classification)
        median_days_unavailable=("days_unavailable", "median"),
        mean_days_unavailable=("days_unavailable", "mean")
    )
    .reset_index()
)

# Generate dominant_location, determining the landlord's primary spatial activity area based on the majority of property listings.
host_level["dominant_location"] = np.where(
    host_level["share_inner_city"] >= 0.5,
    "Inner London",
    "Outer London"
)

#Generate dominant_rental_role，share_long_term_role indicates the proportion of properties under this landlord's name that are systemically classified as 'long-term rental-oriented'.
host_level["dominant_rental_role"] = np.where(
    host_level["share_long_term_role"] >= 0.5,
    "Long-term oriented",
    "Short-term oriented"
)
#“This classification reflects the dominant pattern rather than the full heterogeneity of individual portfolios.”

#Create a new column host_group in host_level (where each row represents one professional host), and initially assign all hosts the value "Unclassified".
host_level["host_group"] = "Unclassified"
#Use loc with conditional statements to assign hosts into four categories.
host_level.loc[
    (host_level["dominant_location"] == "Inner London") &
    (host_level["dominant_rental_role"] == "Short-term oriented"),
    "host_group"
] = "Inner-city short-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Inner London") &
    (host_level["dominant_rental_role"] == "Long-term oriented"),
    "host_group"
] = "Inner-city long-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Outer London") &
    (host_level["dominant_rental_role"] == "Short-term oriented"),
    "host_group"
] = "Outer-city short-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Outer London") &
    (host_level["dominant_rental_role"] == "Long-term oriented"),
    "host_group"
] = "Outer-city long-term professional hosts"
#View grouping results
host_level["host_group"].value_counts()
#View the proxy metric for 'actual operational intensity'.
host_level.groupby("host_group")[[
    "median_days_unavailable",
    "mean_days_unavailable"
]].describe()

#visualisation
##Check the number of specialist landlords in each group
group_counts = (
    host_level["host_group"]
    .value_counts()
    .sort_index()
)
group_counts
##The proportion of the four categories among professional landlords
group_share = group_counts / group_counts.sum() * 100
import matplotlib.pyplot as plt
soft_blues = [
    "#4C72B0",
    "#55A868",
    "#C44E52",
    "#8172B3"
]


plt.figure(figsize=(6, 6))

plt.pie(
    group_share,
    labels=group_share.index,
    autopct="%.1f%%",
    startangle=90,
    colors=soft_blues,
    textprops={"fontsize": 10}
)

plt.title(
    "Composition of Professional Hosts by Location and Rental Orientation",
    fontsize=12
)

plt.axis("equal")
## Save image
### Define the save path
output_dir = "plotsQ2"  
filename = "Composition of Professional Hosts by Location and Rental Orientation.png"

### Create the folder (if it does not exist)
if not os.path.exists(output_dir):
    os.makedirs(output_dir)

### Stitch together the complete path
file_path = os.path.join(output_dir, filename)

### Save image
plt.savefig(file_path, dpi=300, bbox_inches="tight")
print(f"The image has been saved to:{file_path}")
plt.show()

##The proportion of professional landlords among all landlords

total_hosts = df_clean["host_id"].nunique()
professional_hosts_count = host_level["host_id"].nunique()

host_type_counts = pd.Series(
    {
        "Professional hosts": professional_hosts_count,
        "Non-professional hosts": total_hosts - professional_hosts_count
    }
)
host_type_counts
### Drawing
colors_simple = ["#4C72B0", "#DDDDDD"]

plt.figure(figsize=(5, 5))

plt.pie(
    host_type_counts,
    labels=host_type_counts.index,
    autopct="%.1f%%",
    startangle=90,
    colors=colors_simple,
    textprops={"fontsize": 10}
)

plt.title(
    "Share of Professional Hosts Among All Hosts",
    fontsize=12
)

plt.axis("equal")

### Define the save path
output_dir = "plotsQ2" 
filename = "Share of Professional Hosts Among All Hosts.png"

### Create the folder (if it does not exist)
if not os.path.exists(output_dir):
    os.makedirs(output_dir)

### Stitch together the complete path
file_path = os.path.join(output_dir, filename)

### Save image
plt.savefig(file_path, dpi=300, bbox_inches="tight")
print(f"Image saved to:{file_path}")
plt.show()
```
## Q3: How many properties would be affected by the proposal?

**Short answer:**
Our code identifies 31,755 entire home listings as affected by the proposal, linked to 5,222 professional hosts.

**Evidence:**
Professional hosts represent about 9.4 percent of all hosts in the dataset, yet they control about 50.8 percent of entire home listings and account for about 41.4 percent of entire home unavailable nights.

**Interpretation:**
In our notebook, the number of affected properties is derived from a clear operational definition of who the proposal targets. We treat the proposal as applying to professional operators rather than occasional hosts, and we define professional hosts as those running at least two entire home listings. The affected properties are then the entire home listings controlled by these professional hosts. Using this approach, the proposal reaches a large part of the entire home market even though it directly applies to a relatively small fraction of hosts. This is one of the most important findings for the policy discussion because it shows that the market is structurally uneven. A small subset of hosts holds a high share of the housing units that are being used as entire home short term rentals.

The distributional pattern becomes even more meaningful when we consider activity intensity. Our notebook uses unavailable nights as a proxy for how intensively listings are being used for short term rental activity. Under this measure, affected listings account for a substantial share of overall entire home activity. This matters because policy impact should not be interpreted purely through the number of listings. If the regulated segment were mostly inactive, the proposal would likely be symbolic. In contrast, the results indicate that the regulated segment is also a major contributor to commercial use. For this reason, the proposal has the potential to change real market behaviour if compliance is achieved, since the regulated group contributes a large portion of the nights that are not available for ordinary residential use.
Our spatial work also gives the affected number a geographic interpretation. The notebook shows that professional short-term activity is not spread evenly across London but is concentrated in inner city boroughs and specific MSOA clusters. This means the proposal would not only affect a large absolute number of properties, but it would also affect them in places where short term rental pressure appears most visible. In practical terms, this concentration suggests that residents in high intensity areas would be more likely to experience change from the policy, whether through reduced short term rental presence, improved compliance with rules, or shifts in how properties are used. At the same time, the notebook also identifies professional activity in outer areas that is more long term oriented. This warns against assuming that every regulated listing is equally connected to the same housing pressures. The headline number therefore needs to be interpreted together with the typology results, which show variation in intensity and location across professional hosts.
Overall, our results suggest that the proposal’s scope is large in terms of entire home supply, because it covers around half of the entire home market while focusing on roughly one tenth of hosts. This indicates high policy leverage. It also implies that implementation details will matter, because a policy that changes behaviour among professional hosts could influence a large share of entire home short term rental activity across London, especially in the inner-city hotspots identified in our analysis.

```{python}
import pandas as pd
import numpy as np

df = pd.read_csv("/Users/chang/Desktop/0013/data/listings.csv") 
print(df.head())

print(df.shape)

# Uniform column names
df.columns = df.columns.str.lower()
key_columns = [
    "id",
    "host_id",
    "room_type",
    "availability_365",
    "maximum_nights",
    "neighbourhood_cleansed",
    "latitude",
    "longitude"
]
df_select = df[key_columns].copy()

df_select["availability_365"] = pd.to_numeric(
    df_select["availability_365"],
    errors="coerce"
)

df_select["maximum_nights"] = pd.to_numeric(
    df_select["maximum_nights"],
    errors="coerce"
)
df_clean = (
    df_select
    .dropna(subset=[
        "availability_365",
        "maximum_nights",
        "host_id",
        "room_type",
        "neighbourhood_cleansed",
        "latitude",
        "longitude"
    ])
    .reset_index(drop=True)
)

print(df_clean.head())

print("Before NA cleaning:", len(df_select))
print("After NA cleaning:", len(df_clean))

# 1. Only keep the entire set of properties
df_entire = df_clean[df_clean["room_type"] == "Entire home/apt"].copy()

# 2. Count the total number of houses owned by each landlord
host_entire_counts = (
    df_entire
    .groupby("host_id")
    .size()
    .reset_index(name="n_entire_homes")
)

# 3. Professional landlord: ≥ 2 properties
professional_hosts = host_entire_counts[
    host_entire_counts["n_entire_homes"] >= 2
]

# 4. Return to the listing level
df_professional = df_entire.merge(
    professional_hosts[["host_id"]],
    on="host_id",
    how="inner"
)

#The total number of professional landlords, regardless of grouping
n_professional_hosts = professional_hosts.shape[0]

print("Number of professional hosts:", n_professional_hosts)

print(len(df_professional))
print(df_professional.head())

#group
df_professional["neighbourhood_cleansed"].unique()

inner_boroughs = [
    "Camden",
    "Hackney",
    "Islington",
    "Kensington and Chelsea",
    "Lambeth",
    "Southwark",
    "Tower Hamlets",
    "Westminster",
    "Hammersmith and Fulham",
    "Wandsworth",
    "Lewisham",
    "Haringey",
    "Newham",
    "City of London"
]
#Inner London is defined as a set of central boroughs, including the City of London, which constitutes the historic and functional core of London and is consistently classified as part of Inner London in official statistics.

df_professional["inner_city"] = np.where(
    df_professional["neighbourhood_cleansed"].isin(inner_boroughs),
    "Inner London",
    "Outer London"
)
print(df_professional.head())

median_availability = df_professional["availability_365"].median()
mode_availability = df_professional["availability_365"].mode()
median_min_nights = df_professional["maximum_nights"].median()
mode_min_nights = df_professional["maximum_nights"].mode()
print("Availability_365:")
print("  Median:", median_availability)
print("  Mode(s):", mode_availability.tolist())

print("\nmaximum_nights:")
print("  Median:", median_min_nights)
print("  Mode(s):", mode_min_nights.tolist())
#Availability_365:
  #Median: 189.0
  #Mode(s): [0]

#maximum_nights:
 #Median: 365.0
  #Mode(s): [365]
#The median availability of 189 days indicates that more than half of professional listings are unavailable for at least 176 days per year, suggesting a substantial degree of functional withdrawal from the housing market.
#By contrast, the median and modal maximum night setting of 365 indicates that most professional hosts impose no effective upper limit on booking duration, reflecting platform rule configuration rather than realised rental behaviour.
#Maximum night settings are used to identify the intended market role of professional hosts, distinguishing listings designed as long-term or quasi-hotel assets. Availability-based measures are subsequently employed to assess the intensity of commercial operation and its potential social externalities.

df_professional["rental_role"] = np.where(
    df_professional["maximum_nights"] > 90,
    "Long-term oriented",
    "Short-term oriented"
)

df_professional["days_unavailable"] = (
    365 - df_professional["availability_365"]
)

print(df_professional.head())

#group
host_level = (
    df_professional
    .groupby("host_id")
    .agg(
        n_listings=("id", "count"),

        # Spatial orientation (majority principle)
        share_inner_city=("inner_city", lambda x: (x == "Inner London").mean()),

        # Market Role (Majority Principle, Based on maximum_nights)
        share_long_term_role=("rental_role", lambda x: (x == "Long-term oriented").mean()),

        # Operational intensity (descriptive, not for classification)
        median_days_unavailable=("days_unavailable", "median"),
        mean_days_unavailable=("days_unavailable", "mean")
    )
    .reset_index()
)

host_level["dominant_location"] = np.where(
    host_level["share_inner_city"] >= 0.5,
    "Inner London",
    "Outer London"
)

host_level["dominant_rental_role"] = np.where(
    host_level["share_long_term_role"] >= 0.5,
    "Long-term oriented",
    "Short-term oriented"
)

host_level["host_group"] = "Unclassified"

host_level.loc[
    (host_level["dominant_location"] == "Inner London") &
    (host_level["dominant_rental_role"] == "Short-term oriented"),
    "host_group"
] = "Inner-city short-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Inner London") &
    (host_level["dominant_rental_role"] == "Long-term oriented"),
    "host_group"
] = "Inner-city long-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Outer London") &
    (host_level["dominant_rental_role"] == "Short-term oriented"),
    "host_group"
] = "Outer-city short-term professional hosts"

host_level.loc[
    (host_level["dominant_location"] == "Outer London") &
    (host_level["dominant_rental_role"] == "Long-term oriented"),
    "host_group"
] = "Outer-city long-term professional hosts"

host_level["host_group"].value_counts()

host_level.groupby("host_group")[[
    "median_days_unavailable",
    "mean_days_unavailable"
]].describe()

##Data normalization processing (optional)
import pandas as pd
import numpy as np
import geopandas as gpd
def minmax(series: pd.Series) -> pd.Series:
    s = pd.to_numeric(series, errors="coerce")
    s_min, s_max = s.min(), s.max()
    if pd.isna(s_min) or pd.isna(s_max) or s_min == s_max:
        return pd.Series(0.5, index=s.index)
    return (s - s_min) / (s_max - s_min)
  
  import pandas as pd
import numpy as np
if "days_unavailable" not in df_clean.columns and "availability_365" in df_clean.columns:
    df_clean["days_unavailable"] = 365 - df_clean["availability_365"]
    
# 2. Because to calculate the share, a basic scale of the entire Airbnb needs to be prepared.
total_listings = df_clean["id"].nunique()          # Total number of available properties
total_hosts = df_clean["host_id"].nunique()        # Total number of landlords
#All the following "print" statements can be removed / This is just for checking purposes
print(f"Total number of available (total_listings): {total_listings}")
print(f"Total number of landlords (total_hosts): {total_hosts}")
# Just consider the entire property/evaluate the potential impact on benefits
df_entire = df_clean[df_clean["room_type"] == "Entire home/apt"].copy()
total_entire_listings = df_entire["id"].nunique()  # The entire entire house listing 
total_entire_nights = df_entire["days_unavailable"].sum()  # Total "booking days" for the entire apartment
# Total number of affected properties / Total number of landlords: Measures the coverage scale of the policy proposal. This is the basis for calculating potential tax revenue (benefit) and political resistance (cost).
# Total "booking days" for affected properties: Measures the intensity of the actual consumption of these properties by the market. This is the core indicator for evaluating the potential of these properties to be converted into long-term rentals. The higher the number of days, the more severely the housing resources are misused, and the greater the policy benefit.
affected_listings = df_professional["id"].nunique()       # Directly covered by the proposal listing 
affected_hosts = df_professional["host_id"].nunique()     # Directly covered by host 
affected_nights = df_professional["days_unavailable"].sum() 
print("--- Housing market impact indicators (entire property) ---")
print(f"1. The total number of all the available properties (Entire Listings):    {total_entire_listings:,}")
print(f"2. The total number of days that all the properties were booked(Total Nights):   {total_entire_nights:,} nights")
print("\n--- Policy proposal impact scope indicator (professional landlords) ---")
print(f"3. Affected Listings totally (Affected Listings):   {affected_listings:,} listings")
print(f"4. affected_hosts totally (Affected Hosts):      {affected_hosts:,} hosts")
print(f"5. Affected Nights totally (Affected Nights): {affected_nights:,} nights")
# 4.Proportional indicators (the basis for "advantages" and "disadvantages" in terms of scale)
share_affected_hosts = affected_hosts / total_hosts if total_hosts > 0 else np.nan
share_affected_listings_all = affected_listings / total_listings if total_listings > 0 else np.nan
share_affected_listings_entire = affected_listings / total_entire_listings if total_entire_listings > 0 else np.nan
share_affected_nights_entire = affected_nights / total_entire_nights if total_entire_nights > 0 else np.nan
print("--- Policy proposal covers the proportion indicator (for benefit-cost analysis)---")
print(f"1. The proportion of affected landlords among all landlords:                  {share_affected_hosts:.1%}")
print(f"2. The proportion of affected properties among all properties: {share_affected_listings_all:.1%}")
print(f"3. The proportion of affected properties among all complete properties (housing pressure): {share_affected_listings_entire:.1%}")
print(f"4. The proportion of affected properties in relation to the total "booking days" of all complete properties: {share_affected_nights_entire:.1%}")

#The benefits for the mayor
benefit_mayor = pd.DataFrame({
    "metric": [
        "affected_listings_share_of_all",        # Covered by the proposal listing / all listing
        "affected_listings_share_of_entire",     # Covered by the proposal: listing / entire apartment suite
        "affected_nights_share_of_entire_nights" # The number of days the entire suite is booked / The total number of days all the suites are booked
    ],
    "value": [
        share_affected_listings_all,
        share_affected_listings_entire,
        share_affected_nights_entire
    ]
})

benefit_mayor

##Although the opposition policy targets only a small proportion of landlords (9.4%), 
# it effectively covers nearly 41.4% of the resource consumption intensity associated with whole-property listings.
#  Wachsmuth et al's (2017) research indicates that whole-property listings constitute the primary driver of housing displacement. 
#cite：Short-term Cities: Airbnb's Impact on Canadian Housing Markets. 
# It is precisely these commercially operated whole-property listings that constitute the actual diversion of urban housing resources. 
# This implies that by influencing 32.9% of listings and 50.8% of housing pressure, we can address the diversion of 41.4% of housing resources – representing a significant policy lever.How much income can the landlord control - increasing municipal fiscal revenue https://www.towerhamlets.gov.uk/lgnl/planning_and_building_control/Short_term_lets.aspx#:~:text=This%20means%20that%20you%20must,guest%20houses%20(Class%20C1). 
# The "disadvantages" of the mayor - how many landlords are affected, especially the part related to "long-term rental orientation" / They will oppose the mayor and not support the election / Short-term rental has minor dissatisfaction / Long-term rental has major dissatisfaction
host_group_summary = (
    host_level
    .groupby("host_group")
    .agg(
        n_hosts=("host_id", "count"),                 # How many landlords are there for each type of occupation? 
        avg_n_listings=("n_listings", "mean"),        # Per capita number of houses held
        total_nights=("mean_days_unavailable", "sum"),# "Total number of nights operated"
        avg_nights=("mean_days_unavailable", "mean")  
    )
    .reset_index()
)
# The proportion of each indicator for all professional landlords
host_group_summary["share_of_prof_hosts"] = (
    host_group_summary["n_hosts"] / host_group_summary["n_hosts"].sum()
)
host_group_summary["share_of_prof_nights"] = (
    host_group_summary["total_nights"] / host_group_summary["total_nights"].sum()
)

host_group_summary

# Integrating the "long-term" component into the group name - both within and outside the city - if a higher tax rate is uniformly imposed on all professional landlords, this group of hosts will be affected.
host_group_summary["term_type"] = np.where(
    host_group_summary["host_group"].str.contains("long-term", case=False),
    "Long-term oriented",
    "Short-term oriented"
)

term_summary = (
    host_group_summary
    .groupby("term_type")
    .agg(
        n_hosts=("n_hosts", "sum"),                  # The total number of hosts in this category
        total_nights=("total_nights", "sum")         # Total operating nights
    )
    .reset_index()
)
# Calculate the proportion among all professional landlords
total_prof_hosts = term_summary["n_hosts"].sum()
total_prof_nights = term_summary["total_nights"].sum()

term_summary["share_of_prof_hosts"] = term_summary["n_hosts"] / total_prof_hosts
term_summary["share_of_prof_nights"] = term_summary["total_nights"] / total_prof_nights

term_summary
# Result: Approximately 86% are likely to be dissatisfied.

cost_maylor = pd.DataFrame({
    "metric": [
        "affected_hosts_share_of_all_hosts",      # Managed professional landlords / All landlords
        "long_term_listings_share_within_affected",  # The proportion of long-term rental-oriented users affected
        "long_term_nights_share_within_affected"
    ],
    "value": [
        share_affected_hosts,
        float(
            term_summary.loc[term_summary["term_type"] == "Long-term oriented",
                             "share_of_prof_hosts"]
            .fillna(0)
            .iloc[0] 
        ),
        float(
            term_summary.loc[term_summary["term_type"] == "Long-term oriented",
                             "share_of_prof_nights"]
            .fillna(0)
            .iloc[0]
        )
    ]
})

cost_maylor

# 3.1 The "benefits" of the city = Relief in terms of housing/space structure (as mentioned above) + Involvement of problem landlords and properties in governance

city_benefit = pd.DataFrame({
    "metric": [
        # The overall size of the entire house covered by the proposal (housing structural mitigation potential)
        "share_affected_listings_of_all_listings",
        "share_affected_listings_of_entire_homes",
        "share_affected_nights_of_entire_homes",
        # Inner City Short-Term Rental -—
        "inner_short_hosts_share_of_prof_hosts",
        "inner_short_nights_share_of_prof_nights"
    ],
    "value": [
        share_affected_listings_all,
        share_affected_listings_entire,
        share_affected_nights_entire,
        float(
            host_group_summary
            .loc[host_group_summary["host_group"] == "Inner-city short-term professional hosts",
                 "share_of_prof_hosts"]
            .fillna(0)
            .iloc[0]
        ),
        float(
            host_group_summary
            .loc[host_group_summary["host_group"] == "Inner-city short-term professional hosts",
                 "share_of_prof_nights"]
            .fillna(0)
             ),
    ]
})

# 3.2 The drawbacks of cities = Potential losses in short-term rental supply/economic vitality (such as tourism), as well as impacts on suburban/long-term rental groups

city_cost = pd.DataFrame({
    "metric": [
        # The proposal may reduce the scale of short-term rental supply. Two "share" options are uncertain. Use the first "supply" option.
        "share_of_city_entire_home_supply_at_risk",     # The proportion of the entire apartment units that have been affected by the strike
        "share_of_city_entire_home_nights_at_risk",     # The number of nights the properties were affected as a whole accounted for the total number of nights for all properties.
# Among professional landlords, the part that is more affected resembles "outer-city long-term rental small property owners"
        "outer_long_hosts_share_of_prof_hosts",
        "outer_long_nights_share_of_prof_nights"
    ],
    "value": [
        share_affected_listings_entire,
        share_affected_nights_entire,
        float(
            host_group_summary
            .loc[host_group_summary["host_group"] == "Outer-city long-term professional hosts",
                 "share_of_prof_hosts"]
            .fillna(0)
            .iloc[0]
        ),
        float(
            host_group_summary
            .loc[host_group_summary["host_group"] == "Outer-city long-term professional hosts",
                 "share_of_prof_nights"]
            .fillna(0)
            .iloc[0]
        ),
    ]
})

city_benefit, city_cost

# The advantages and disadvantages for the residents
share_long_term_prof_hosts = float(
    term_summary.loc[term_summary["term_type"] == "Long-term oriented", "share_of_prof_hosts"].fillna(0).iloc[0]
)
share_long_term_prof_nights = float(
    term_summary.loc[term_summary["term_type"] == "Long-term oriented", "share_of_prof_nights"].fillna(0).iloc[0]
)

share_short_term_prof_hosts = float(
    term_summary.loc[term_summary["term_type"] == "Short-term oriented", "share_of_prof_hosts"].fillna(0).iloc[0]
)
share_short_term_prof_nights = float(
    term_summary.loc[term_summary["term_type"] == "Short-term oriented", "share_of_prof_nights"].fillna(0).iloc[0]
)
outer_long = host_group_summary[
    host_group_summary["host_group"] == "Outer-city long-term professional hosts"
]

share_outer_long_hosts = float(
    (outer_long["n_hosts"] / total_prof_hosts).fillna(0).iloc[0]
)
share_outer_long_nights = float(
    (outer_long["total_nights"] / total_prof_nights).fillna(0).iloc[0]
)
# Benefit
# - The overall scale of the property and the number of short-term rentals -> Residents are less disturbed by short-term visitors / Housing occupancy is reduced
# - The latter two points: Crackdown on long-term hosts -> Promote fairness

resident_benefit = pd.DataFrame({
    "metric": [
        "affected_entire_listings_share_of_all_entire_homes",
        "affected_entire_nights_share_of_all_entire_nights",
        "long_term_prof_hosts_share_among_prof_hosts",
        "long_term_prof_nights_share_among_prof_nights"
    ],
    "value": [
        share_affected_listings_entire,
        share_affected_nights_entire,
        share_long_term_prof_hosts,
        share_long_term_prof_nights
    ]
})

# Problem
# - The first item: Professional landlords are also residents. The profession of landlords directly targeted by the policy, which accounts for the proportion of all Airbnb landlords -> How many "residential landlords" have their income affected
# - The second and third items: The proportion of long-term rental professional landlords among all landlords -> They are more like local families/small business owners and are subject to a blanket policy
# - The fourth item: The overall proportion of long-term rental professional landlords among all landlords -> Some of these landlords rent to local residents/are like small wild boars/providing more flexible rental options for local residents

resident_cost = pd.DataFrame({
    "metric": [
        "affected_prof_hosts_share_of_all_hosts",
        "outer_long_term_prof_hosts_share_among_prof_hosts",
        "outer_long_term_prof_nights_share_among_prof_nights",
        "long_term_prof_hosts_share_among_prof_hosts"
    ],
    "value": [
        affected_hosts / total_hosts if total_hosts > 0 else np.nan,
        share_outer_long_hosts,
        share_outer_long_nights,
        share_long_term_prof_hosts
    ]
})


resident_benefit, resident_cost
def tag_metrics(df, stakeholder, side):
    df = df.copy()
    df["stakeholder"] = stakeholder   
    df["side"] = side                 
    return df

combined_metrics = pd.concat([
    tag_metrics(benefit_mayor,    "Mayor",     "Benefit"),
    tag_metrics(cost_maylor,       "Mayor",     "Cost"),
    tag_metrics(city_benefit,     "City",      "Benefit"),
    tag_metrics(city_cost,        "City",      "Cost"),
    tag_metrics(resident_benefit, "Residents", "Benefit"),
    tag_metrics(resident_cost,    "Residents", "Cost"),
], ignore_index=True)
#For those names that can be understood and whose meanings are clear
config = {
    "Mayor": {
        "Benefit": {
            "Policy Coverage Scope": "affected_listings_share_of_all",
            "Housing supply easing potential": "affected_listings_share_of_entire",
            "Resource mitigation potential": "affected_nights_share_of_entire_nights",
        },
        "Cost": {
            "The proportion of landlords affected by policy measures of total": "affected_hosts_share_of_all_hosts",
             "Percentage of affected landlords likely to oppose": "long_term_listings_share_within_affected",
        },
    },
    "City": {
        "Benefit": {
            "Housing supply easing potential": "share_affected_listings_of_entire_homes",
            "Resource mitigation potential": "share_affected_nights_of_entire_homes",
            #Crackdown on short-term rentals in the inner city - unsure whether to do it or not, can be deleted
            "Inner-city commercial nights targeted": "inner_short_nights_share_of_prof_nights",
        },
        "Cost": {
            "Outer Long-Term Landlords Affected": "outer_long_hosts_share_of_prof_hosts",
            "Crackdown on tourism accommodation": "share_of_city_entire_home_supply_at_risk",
            
        },
    },

    "Residents": {
        "Benefit": {
            "Reduce disturbance": "affected_entire_listings_share_of_all_entire_homes",
            "Reduce night-time disturbances": "affected_entire_nights_share_of_all_entire_nights",
            "Enhancing social equity": "long_term_prof_hosts_share_among_prof_hosts",
        },
        "Cost": {
            "Landlords facing reduced income": "affected_prof_hosts_share_of_all_hosts",
            "Landlords who shouldn't be penalised": "outer_long_term_prof_hosts_share_among_prof_hosts",
            "Reducing residents' rental options": "outer_long_term_prof_nights_share_among_prof_nights",
        },
    },
}
#Matrix table format
def build_overall_matrix(combined_metrics, config, decimals=3, sep="\n"):
    stakeholders = list(config.keys())
    sides = ["Benefit", "Cost"]

    table = pd.DataFrame(index=sides, columns=stakeholders, dtype=object)

    def get_value(stakeholder, side, metric_name):
        rows = combined_metrics[
            (combined_metrics["stakeholder"] == stakeholder) &
            (combined_metrics["side"] == side) &
            (combined_metrics["metric"] == metric_name)
        ]
        if rows.empty:
            return None
        return float(rows["value"].iloc[0])

    for stakeholder in stakeholders:
        for side in sides:
            metric_map = config[stakeholder].get(side, {})
            cell_lines = []
            for label, metric_name in metric_map.items():
                val = get_value(stakeholder, side, metric_name)
                if val is None or np.isnan(val):
                    line = f"{label}: N/A"
                else:
                    line = f"{label}: {val:.1%}"
                cell_lines.append(line)
            table.loc[side, stakeholder] = sep.join(cell_lines)

    return table
overall_matrix = build_overall_matrix(combined_metrics, config)
pd.set_option('display.max_colwidth', None)   # The content of each cell is not truncated.
pd.set_option('display.width', 200)          # The maximum number of characters displayed per line can be adjusted as needed.
pd.set_option('display.max_columns', 10)     # Allow multi-column display
overall_matrix

#ols cannot handle this --- it's just an observation value and has no meaning
#thinking： Do the Airbnb structures (the proportion of professional landlords and density) in different areas of the inner city significantly explain the housing pressure index that residents perceive?
#We need a DataFrame + variables. The dependent variable is： idx_housing_pressure， and the independent variables are： prof_listing_share， listings_per_km2 (density)
#Select the dependent variable and independent variables

import statsmodels.api as sm
#Dependent variable: Housing stress index (is it available?)
y_col = "idx_housing_pressure"
if y_col not in df.columns:
    raise ValueError(f"msoa_xxxx can not find: {y_col}")

y = df[y_col]

candidate_X = [
    "prof_listing_share",   # The proportion of professional landlords in the London MSOA
    "listings_per_km2",     # Airbnb density (number of listings / area of MSOA)
]

# Only retain the columns that actually exist in df, to avoid errors.
X_cols = [col for col in candidate_X if col in df.columns]

if not X_cols:
    raise ValueError("can not find")

X = df[X_cols]

# 3）Combine the dependent variable and the independent variable, and delete the rows with missing values.
reg_df = pd.concat([y, X], axis=1).dropna()
y_clean = reg_df[y_col]
X_clean = reg_df[X_cols]

# 4）Add the intercept term (constant)
X_clean = sm.add_constant(X_clean)

# 5）OLS 
model = sm.OLS(y_clean, X_clean)
results = model.fit()

print(results.summary())

```

## Q4: What are the likely pros and cons of the proposal?

### Implications for the Mayor
**Potential benefits:**  
- 
-

**Potential drawbacks:**  
- 
- 

### Implications for Residents
**Potential benefits:**  
- 
-

**Potential drawbacks:**  
- 
- 

### Implications for the City
**Potential benefits:**  
- 
-

**Potential drawbacks:**  
- 
- 

### Spatial Evidence: High Leverage vs Uneven Costs
**Key Spatial Patterns** 

**Interpretation** 

```{python}
# 这里才写 Python
import pandas as pd
import geopandas as gpd

df = pd.read_csv("data/listings.csv")
df.head()
```
## Q5: Can the story be reframed positively in terms of social mobility?

**Short answer:**  
Yes, Airbnb’s uneven and seemingly uncontrolled growth can be reframed as a mechanism that makes social inequality visible, turning gentrification into a spatially governable issue and enabling a more equitable and strategic redistribution of economic opportunities and social resources.

**Evidence and framing:**  

- 1 Airbnb, a Contested Sharing Economy Platform, to a Governable Policy Object
Airbnb is one of the most prominent platforms within the so-called “sharing economy,” using peer-to-peer digital technology to connect hosts and guests and, in doing so, creating a form of short-term rental that sits between traditional residential letting and hotel accommodation (@wachsmuth2018airbnb). While short-term rental platforms are often framed in public debate as drivers of housing shortages, inequality, and gentrification, the findings of this study—read alongside the existing literature—suggest a more nuanced interpretation. Rather than viewing Airbnb solely as a source of housing pressure, it can also be understood as a lens through which underlying market dynamics become visible, creating opportunities for more targeted and effective urban governance.


- 2 Evidence of Spatial Heterogeneity
The evidence clearly shows that Airbnb’s impact on London’s housing market is not evenly distributed across the city. Although professional hosts make up only around 9% of all Airbnb hosts, they control approximately 51% of entire-home listings and account for about 41% of all entire-home booking nights. These activities are heavily concentrated in inner-city areas and are characterised by high-intensity, entire-home use, with a median operating intensity of around 293 nights per year. By contrast, professional hosts in outer-city areas operate at much lower intensity, with a median of approximately 142 nights per year. Their activity more closely resembles low-intensity, intermittent, or income-supplementary letting, rather than the systematic removal of housing from the long-term residential market. Mapping the spatial concentration of Airbnb listings further confirms that housing commercialisation pressures are clustered in a small number of inner-city areas, rather than spread evenly across London as a whole.


- 3 From “Gentrification” in London to the “Visualisation of Inequality”
In the London context, these spatial differences need to be understood against the city’s longer-term patterns of gentrification.
London has long displayed a clear inner–outer city divide: inner-city areas concentrate high-value employment, cultural capital, and investment-led housing demand, while outer-city areas primarily serve residential and social reproduction functions. This structural imbalance creates conditions in which gentrification pressures are more likely to emerge and become spatially concentrated (@gyodi2024spatial). Without effective guidance, short-term rentals in high-demand inner-city areas can reinforce these existing dynamics, accelerating gentrification, further undermining housing affordability, and increasing the risk of community displacement.

However, the spatial analysis in this study suggests that Airbnb does not shape this process in the same way across the city.
Rather than operating uniformly, it brings the sharp differences in housing use between inner and outer London into clearer view. Mapping the spatial concentration of listings shows that housing commercialisation pressures are tightly clustered in inner-city neighbourhoods, while outer-city areas display a distinctly different pattern characterised by low-intensity, supplementary short-term renting. From this perspective, short-term rentals are not simply a “gentrification accelerator,” but also a means through which previously less visible spatial inequalities become more apparent.

This pattern of spatial heterogeneity is consistent with findings in the existing literature. Previous research shows that Airbnb introduces a new and spatially uneven stream of potential rental income into housing markets, creating a “short-term rental rent gap” that is most pronounced in high-demand inner-city areas (@wachsmuth2018airbnb). At the same time, market-focused studies indicate that, under low-intensity conditions, short-term renting can serve as a way of making use of underutilised housing assets and strengthening household economic resilience (@barron2021effect). 

**Interpretation** 
Policy Implications and Recommendations

From a policy perspective, Airbnb’s expansion can be understood not simply as market activity, but as a process that reshapes housing use and highlights where pressures in the housing system are most concentrated.
In high-demand inner-city areas, short-term rentals quickly expose latent rent gaps, providing policymakers with clear and geographically identifiable targets for intervention. By contrast, in outer-city areas, legal and low-intensity short-term rental activity may offer households valuable income flexibility. Small-scale short-term rental income can help younger households manage mortgage payments or provide a supplementary source of income during periods of labour market instability, thereby strengthening household resilience. By providing an additional financial buffer, these arrangements can help individuals and families strengthen their economic resilience over time, supporting opportunities for upward social mobility across the life course.

On the other hand, equally important, making inequality visible has clear implications for how cities are governed. Rather than treating gentrification as a diffuse and hard-to-pin-down urban trend, this approach allows policymakers to identify risk areas based on concrete evidence.
As a result, the policy debate can move away from the abstract question of whether Airbnb should be restricted in general, and instead focus on more practical concerns: which locations and which forms of short-term rental activity pose genuine housing risks, and how targeted interventions can be designed without creating disproportionate social costs.

For the mayor, the key question is therefore not whether Airbnb should be tolerated or banned, but how different forms of short-term rental activity vary by location and operating intensity.
Uniform regulation, or “one-size-fits-all” restrictions, risk imposing disproportionate governance costs in non-core areas while weakening policy effectiveness in inner-city neighbourhoods where housing commercialisation pressures are most acute. By contrast, a guided approach to governance (being sensitive to spatial variation and differences in operating intensity) can both relieve housing pressures in inner-city areas and preserve the potential positive role of short-term rentals in supporting household resilience and social mobility.
Reframing Airbnb and its spatial distribution as a process that reveals, rather than simply produces, inequality can therefore support more transparent, targeted, and spatially responsive policymaking. This perspective does not deny the reality or risks of inner-city gentrification. Rather, it emphasises that by making these risks visible, measurable, and geographically specific, data-driven spatial analysis creates political and policy space for the mayor to pursue rational, differentiated action in an otherwise highly contentious housing debate.
  

```{python}
# 这里才写 Python
import pandas as pd
import geopandas as gpd

df = pd.read_csv("data/listings.csv")
df.head()
```

## Overall Assessment

## Transparency and Limitations
（这些是Q2/4的，自己加自己负责的部分的Transparency and Limitations）
- This analysis relies on scraped platform data and operational definitions of professional landlords, which may under- or over-estimate true levels of commercial activity. Spatial patterns should therefore be interpreted as indicative rather than definitive.
- Operating nights are proxied using availability data.
- The 90-day threshold is policy-relevant but imperfect.
- Results describe relative patterns rather than causal effects.


{{< include _questions.qmd >}}

## References
把自己用到的文献都放进来，注意老师说的参考文献的方式！！！！
'在 Quarto 中，您需要使用 BibTeX 和 Markdown格式进行引用。“硬编码”的引用将不被接受。'
@article{wachsmuth2018airbnb,
  title={Airbnb and the rent gap: Gentrification through the sharing economy},
  author={Wachsmuth, David and Weisler, Alexander},
  journal={Environment and planning A: economy and space},
  volume={50},
  number={6},
  pages={1147--1170},
  year={2018},
  publisher={SAGE Publications Sage UK: London, England}
}

@article{gyodi2024spatial,
  title={The spatial patterns of Airbnb offers, hotels and attractions: are professional hosts taking over cities?},
  author={Gy{\'o}di, Krist{\'o}f},
  journal={Current Issues in Tourism},
  volume={27},
  number={17},
  pages={2757--2782},
  year={2024},
  publisher={Taylor \& Francis}
}

@article{barron2021effect,
  title={The effect of home-sharing on house prices and rents: Evidence from Airbnb},
  author={Barron, Kyle and Kung, Edward and Proserpio, Davide},
  journal={Marketing Science},
  volume={40},
  number={1},
  pages={23--47},
  year={2021},
  publisher={INFORMS}
}  





